"use strict";(self["webpackChunkmy_project"]=self["webpackChunkmy_project"]||[]).push([[5775],{95775:function(e,t,i){i.d(t,{y:function(){return x},r:function(){return m}});var s=i(61681),n=i(18449),a=i(50842),r=i(7505),o=i(35925),l=i(85587),u=i(76432);class c{constructor(e,t,i){this._fieldDataCache=new Map,this._returnDistinctMap=new Map,this.returnDistinctValues=e.returnDistinctValues??!1,this.fieldsIndex=i,this.featureAdapter=t;const s=e.outFields;if(s&&!s.includes("*")){this.outFields=s;let e=0;for(const t of s){const s=(0,l.hr)(t),n=this.fieldsIndex.get(s),a=n?null:(0,l.Jc)(s,i),r=n?n.name:(0,l.nu)(t)||"FIELD_EXP_"+e++;this._fieldDataCache.set(t,{alias:r,clause:a})}}}countDistinctValues(e){return this.returnDistinctValues?(e.forEach((e=>this.getAttributes(e))),this._returnDistinctMap.size):e.length}getAttributes(e){const t=this._processAttributesForOutFields(e);return this._processAttributesForDistinctValues(t)}getFieldValue(e,t,i){const s=i?i.name:t;let n=null;return this._fieldDataCache.has(s)?n=this._fieldDataCache.get(s).clause:i||(n=(0,l.Jc)(t,this.fieldsIndex),this._fieldDataCache.set(s,{alias:s,clause:n})),i?this.featureAdapter.getAttribute(e,s):n.calculateValue(e,this.featureAdapter)}getDataValue(e,t){const i=t.normalizationType,s=t.normalizationTotal;let n=this.getFieldValue(e,t.field,this.fieldsIndex.get(t.field));if(t.field2&&(n=`${(0,u.wk)(n)}${t.fieldDelimiter}${(0,u.wk)(this.getFieldValue(e,t.field2,this.fieldsIndex.get(t.field2)))}`,t.field3&&(n=`${n}${t.fieldDelimiter}${(0,u.wk)(this.getFieldValue(e,t.field3,this.fieldsIndex.get(t.field3)))}`)),i&&Number.isFinite(n)){const a="field"===i&&t.normalizationField?this.getFieldValue(e,t.normalizationField,this.fieldsIndex.get(t.normalizationField)):null;n=(0,u.fk)(n,i,a,s)}return n}getExpressionValue(e,t,i,s){const n={attributes:this.featureAdapter.getAttributes(e),layer:{fields:this.fieldsIndex.fields}},a=s.createExecContext(n,i);return s.executeFunction(t,a)}getExpressionValues(e,t,i,s){const n={fields:this.fieldsIndex.fields};return e.map((e=>{const a={attributes:this.featureAdapter.getAttributes(e),layer:n},r=s.createExecContext(a,i);return s.executeFunction(t,r)}))}validateItem(e,t){return this._fieldDataCache.has(t)||this._fieldDataCache.set(t,{alias:t,clause:(0,l.Jc)(t,this.fieldsIndex)}),this._fieldDataCache.get(t).clause.testFeature(e,this.featureAdapter)}validateItems(e,t){return this._fieldDataCache.has(t)||this._fieldDataCache.set(t,{alias:t,clause:(0,l.Jc)(t,this.fieldsIndex)}),this._fieldDataCache.get(t).clause.testSet(e,this.featureAdapter)}_processAttributesForOutFields(e){const t=this.outFields;if(!t||!t.length)return this.featureAdapter.getAttributes(e);const i={};for(const s of t){const{alias:t,clause:n}=this._fieldDataCache.get(s);i[t]=n?n.calculateValue(e,this.featureAdapter):this.featureAdapter.getAttribute(e,t)}return i}_processAttributesForDistinctValues(e){if((0,s.Wi)(e)||!this.returnDistinctValues)return e;const t=this.outFields,i=[];if(t)for(const s of t){const{alias:t}=this._fieldDataCache.get(s);i.push(e[t])}else for(const s in e)i.push(e[s]);const n=`${(t||["*"]).join(",")}=${i.join(",")}`;let a=this._returnDistinctMap.get(n)||0;return this._returnDistinctMap.set(n,++a),a>1?null:e}}var d=i(66069);function f(e,t,i){return{objectId:e,target:t,distance:i,type:"vertex"}}function h(e,t,i,s,n,a=!1){return{objectId:e,target:t,distance:i,type:"edge",start:s,end:n,draped:a}}var m,g=i(34398),p=i(99294),y=i(30879);class x{constructor(e,t,i){this.items=e,this.query=t,this.geometryType=i.geometryType,this.hasM=i.hasM,this.hasZ=i.hasZ,this.fieldsIndex=i.fieldsIndex,this.objectIdField=i.objectIdField,this.spatialReference=i.spatialReference,this.featureAdapter=i.featureAdapter}get size(){return this.items.length}createQueryResponseForCount(){const e=new c(this.query,this.featureAdapter,this.fieldsIndex);if(!this.query.outStatistics)return e.countDistinctValues(this.items);const{groupByFieldsForStatistics:t,having:i,outStatistics:s}=this.query,n=t?.length;if(!n)return 1;const a=new Map,r=new Map,o=new Set;for(const l of s){const{statisticType:s}=l,n="exceedslimit"!==s?l.onStatisticField:void 0;if(!r.has(n)){const i=[];for(const s of t){const t=this._getAttributeValues(e,s,a);i.push(t)}r.set(n,this._calculateUniqueValues(i,e.returnDistinctValues))}const u=r.get(n);for(const t in u){const{data:s,items:n}=u[t],a=s.join(",");i&&!e.validateItems(n,i)||o.add(a)}}return o.size}async createQueryResponse(){let e;return e=this.query.outStatistics?this.query.outStatistics.some((e=>"exceedslimit"===e.statisticType))?this._createExceedsLimitQueryResponse(this.query):await this._createStatisticsQueryResponse(this.query):this._createFeatureQueryResponse(this.query),this.query.returnQueryGeometry&&((0,o.JY)(this.query.outSR)&&!(0,o.fS)(this.query.geometry.spatialReference,this.query.outSR)?e.queryGeometry=(0,g.S2)({spatialReference:this.query.outSR,...(0,d.iV)(this.query.geometry,this.query.geometry.spatialReference,this.query.outSR)}):e.queryGeometry=(0,g.S2)({spatialReference:this.query.outSR,...this.query.geometry})),e}createSnappingResponse(e,t){const i=this.featureAdapter,n=_(this.hasZ,this.hasM),{point:a}=e,r="number"==typeof e.distance?e.distance:e.distance.x,o="number"==typeof e.distance?e.distance:e.distance.y,l={candidates:[]},u="esriGeometryPolygon"===this.geometryType,c=null!=a.z,d=null!=a.m,g=this._getPointCreator(a,c,d,this.spatialReference,t),p=new I(null,0),y=new I(null,0),x={x:0,y:0,z:0};for(const _ of this.items){const t=i.getGeometry(_);if((0,s.Wi)(t))continue;const{coords:c,lengths:d}=t;if(p.coords=c,y.coords=c,e.types&m.EDGE){let e=0;for(let t=0;t<d.length;t++){const s=d[t];for(let t=0;t<s;t++,e+=n){const u=p;if(u.coordsIndex=e,t!==s-1){const t=y;t.coordsIndex=e+n;const s=x;F(x,a,u,t);const c=(a.x-s.x)/r,d=(a.y-s.y)/o,f=c*c+d*d;f<=1&&l.candidates.push(h(i.getObjectId(_),g(s),Math.sqrt(f),g(u),g(t)))}}}}if(e.types&m.VERTEX){const e=u?c.length-n:c.length;for(let t=0;t<e;t+=n){const e=p;e.coordsIndex=t;const s=(a.x-e.x)/r,n=(a.y-e.y)/o,u=s*s+n*n;u<=1&&l.candidates.push(f(i.getObjectId(_),g(e),Math.sqrt(u)))}}}return l.candidates.sort(((e,t)=>e.distance-t.distance)),l}_getPointCreator(e,t,i,n,a){const r=(0,s.pC)(a)&&!(0,o.fS)(n,a)?e=>(0,d.iV)(e,n,a):e=>e,{hasZ:l}=this,u=0,c=e.m;return t&&i?l?({x:e,y:t,z:i})=>r({x:e,y:t,z:i,m:c}):({x:e,y:t})=>r({x:e,y:t,z:u,m:c}):t?l?({x:e,y:t,z:i})=>r({x:e,y:t,z:i}):({x:e,y:t})=>r({x:e,y:t,z:u}):i?({x:e,y:t})=>r({x:e,y:t,m:c}):({x:e,y:t})=>r({x:e,y:t})}async createSummaryStatisticsResponse(e){const{field:t,valueExpression:i,normalizationField:s,normalizationType:n,normalizationTotal:a,minValue:r,maxValue:o,scale:l}=e,c=this.fieldsIndex.isDateField(t),d=await this._getDataValues({field:t,valueExpression:i,normalizationField:s,normalizationType:n,normalizationTotal:a,scale:l}),f=(0,u.S5)({normalizationType:n,normalizationField:s,minValue:r,maxValue:o}),h=this.fieldsIndex.get(t),m={value:.5,fieldType:h?.type},g=(0,p.qN)(h)?(0,u.H0)({values:d,supportsNullCount:f,percentileParams:m}):(0,u.i5)({values:d,minValue:r,maxValue:o,useSampleStdDev:!n,supportsNullCount:f,percentileParams:m});return(0,u.F_)(g,c)}async createUniqueValuesResponse(e){const{field:t,valueExpression:i,domains:s,returnAllCodedValues:n,scale:a}=e,r=await this._getDataValues({field:t,field2:e.field2,field3:e.field3,fieldDelimiter:e.fieldDelimiter,valueExpression:i,scale:a}),o=(0,u.eT)(r);return(0,u.Qm)(o,s,n,e.fieldDelimiter)}async createClassBreaksResponse(e){const{field:t,valueExpression:i,normalizationField:s,normalizationType:n,normalizationTotal:a,classificationMethod:r,standardDeviationInterval:o,minValue:l,maxValue:c,numClasses:d,scale:f}=e,h=await this._getDataValues({field:t,valueExpression:i,normalizationField:s,normalizationType:n,normalizationTotal:a,scale:f}),m=(0,u.G2)(h,{field:t,normalizationField:s,normalizationType:n,normalizationTotal:a,classificationMethod:r,standardDeviationInterval:o,minValue:l,maxValue:c,numClasses:d});return(0,u.DL)(m,r)}async createHistogramResponse(e){const{field:t,valueExpression:i,normalizationField:s,normalizationType:n,normalizationTotal:a,classificationMethod:r,standardDeviationInterval:o,minValue:l,maxValue:c,numBins:d,scale:f}=e,h=await this._getDataValues({field:t,valueExpression:i,normalizationField:s,normalizationType:n,normalizationTotal:a,scale:f});return(0,u.oF)(h,{field:t,normalizationField:s,normalizationType:n,normalizationTotal:a,classificationMethod:r,standardDeviationInterval:o,minValue:l,maxValue:c,numBins:d})}_sortFeatures(e,t,i){if(e.length>1&&t&&t.length)for(const s of t.reverse()){const t=s.split(" "),n=t[0],a=this.fieldsIndex.get(n),r=t[1]&&"desc"===t[1].toLowerCase(),o=(0,u.Lq)(a?.type,r);e.sort(((e,t)=>{const s=i(e,n,a),r=i(t,n,a);return o(s,r)}))}}_createFeatureQueryResponse(e){const t=this.items,{geometryType:i,hasM:s,hasZ:n,objectIdField:a,spatialReference:o}=this,{outFields:l,outSR:u,quantizationParameters:c,resultRecordCount:d,resultOffset:f,returnZ:h,returnM:m}=e,p=null!=d&&t.length>(f||0)+d,y=l&&(l.includes("*")?[...this.fieldsIndex.fields]:l.map((e=>this.fieldsIndex.get(e))));return{exceededTransferLimit:p,features:this._createFeatures(e,t),fields:y,geometryType:i,hasM:s&&m,hasZ:n&&h,objectIdFieldName:a,spatialReference:(0,g.S2)(u||o),transform:c&&(0,r.vY)(c)||null}}_createFeatures(e,t){const i=new c(e,this.featureAdapter,this.fieldsIndex),{hasM:s,hasZ:n}=this,{orderByFields:a,quantizationParameters:o,returnGeometry:l,returnCentroid:u,maxAllowableOffset:d,resultOffset:f,resultRecordCount:h,returnZ:m=!1,returnM:p=!1}=e,y=n&&m,x=s&&p;let F=[],_=0;const I=[...t];if(this._sortFeatures(I,a,((e,t,s)=>i.getFieldValue(e,t,s))),l||u){const e=(0,r.vY)(o);if(l&&!u)for(const t of I)F[_++]={attributes:i.getAttributes(t),geometry:(0,g.Op)(this.geometryType,this.hasZ,this.hasM,this.featureAdapter.getGeometry(t),d,e,y,x)};else if(!l&&u)for(const t of I)F[_++]={attributes:i.getAttributes(t),centroid:(0,g.EG)(this,this.featureAdapter.getCentroid(t,this),e)};else for(const t of I)F[_++]={attributes:i.getAttributes(t),centroid:(0,g.EG)(this,this.featureAdapter.getCentroid(t,this),e),geometry:(0,g.Op)(this.geometryType,this.hasZ,this.hasM,this.featureAdapter.getGeometry(t),d,e,y,x)}}else for(const r of I){const e=i.getAttributes(r);e&&(F[_++]={attributes:e})}const S=f||0;if(null!=h){const e=S+h;F=F.slice(S,Math.min(F.length,e))}return F}_createExceedsLimitQueryResponse(e){let t=!1,i=Number.POSITIVE_INFINITY,n=Number.POSITIVE_INFINITY,a=Number.POSITIVE_INFINITY;for(const s of e.outStatistics)if("exceedslimit"===s.statisticType){i=null!=s.maxPointCount?s.maxPointCount:Number.POSITIVE_INFINITY,n=null!=s.maxRecordCount?s.maxRecordCount:Number.POSITIVE_INFINITY,a=null!=s.maxVertexCount?s.maxVertexCount:Number.POSITIVE_INFINITY;break}if("esriGeometryPoint"===this.geometryType)t=this.items.length>i;else if(this.items.length>n)t=!0;else{const e=_(this.hasZ,this.hasM),i=this.featureAdapter;t=this.items.reduce(((e,t)=>{const n=i.getGeometry(t);return e+((0,s.pC)(n)&&n.coords.length||0)}),0)/e>a}return{fields:[{name:"exceedslimit",type:"esriFieldTypeInteger",alias:"exceedslimit",sqlType:"sqlTypeInteger",domain:null,defaultValue:null}],features:[{attributes:{exceedslimit:Number(t)}}]}}async _createStatisticsQueryResponse(e){const t={attributes:{}},i=[],s=new Map,n=new Map,a=new Map,r=new Map,o=new c(e,this.featureAdapter,this.fieldsIndex),l=e.outStatistics,{groupByFieldsForStatistics:u,having:d,orderByFields:f}=e,h=u&&u.length,m=!!h,g=m&&u[0],p=m&&!this.fieldsIndex.get(g);for(const c of l){const{outStatisticFieldName:e,statisticType:l}=c,f=c,y="exceedslimit"!==l?c.onStatisticField:void 0,x="percentile_disc"===l||"percentile_cont"===l,F="EnvelopeAggregate"===l||"CentroidAggregate"===l||"ConvexHullAggregate"===l,_=m&&1===h&&(y===g||p)&&"count"===l;if(m){if(!a.has(y)){const e=[];for(const t of u){const i=this._getAttributeValues(o,t,s);e.push(i)}a.set(y,this._calculateUniqueValues(e,!F&&o.returnDistinctValues))}const t=a.get(y);for(const i in t){const{count:n,data:a,items:l,itemPositions:c}=t[i],h=a.join(",");if(!d||o.validateItems(l,d)){const t=r.get(h)||{attributes:{}};if(F){t.aggregateGeometries||(t.aggregateGeometries={});const{aggregateGeometries:e,outStatisticFieldName:i}=await this._getAggregateGeometry(f,l);t.aggregateGeometries[i]=e}else{let i=null;if(_)i=n;else{const e=this._getAttributeValues(o,y,s),t=c.map((t=>e[t]));i=x&&"statisticParameters"in f?this._getPercentileValue(f,t):this._getStatisticValue(f,t,null,o.returnDistinctValues)}t.attributes[e]=i}let i=0;u.forEach(((e,s)=>t.attributes[this.fieldsIndex.get(e)?e:"EXPR_"+ ++i]=a[s])),r.set(h,t)}}}else if(F){t.aggregateGeometries||(t.aggregateGeometries={});const{aggregateGeometries:e,outStatisticFieldName:i}=await this._getAggregateGeometry(f,this.items);t.aggregateGeometries[i]=e}else{const i=this._getAttributeValues(o,y,s);t.attributes[e]=x&&"statisticParameters"in f?this._getPercentileValue(f,i):this._getStatisticValue(f,i,n,o.returnDistinctValues)}i.push({name:e,alias:e,type:"esriFieldTypeDouble"})}const y=m?Array.from(r.values()):[t];return this._sortFeatures(y,f,((e,t)=>e.attributes[t])),{fields:i,features:y}}async _getAggregateGeometry(e,t){const s=await Promise.all([i.e(9067),i.e(8923)]).then(i.bind(i,8923)),{statisticType:r,outStatisticFieldName:o}=e,{featureAdapter:l,spatialReference:u,geometryType:c,hasZ:d,hasM:f}=this,h=t.map((e=>(0,g.Op)(c,d,f,l.getGeometry(e)))),m=s.convexHull(u,h,!0)[0],p={aggregateGeometries:null,outStatisticFieldName:null};if("EnvelopeAggregate"===r){const e=m?(0,a._w)(m):(0,a.aO)(s.union(u,h));p.aggregateGeometries={...e,spatialReference:u},p.outStatisticFieldName=o||"extent"}else if("CentroidAggregate"===r){const e=m?(0,n.tO)(m):(0,n.$G)((0,a.aO)(s.union(u,h)));p.aggregateGeometries={x:e[0],y:e[1],spatialReference:u},p.outStatisticFieldName=o||"centroid"}else"ConvexHullAggregate"===r&&(p.aggregateGeometries=m,p.outStatisticFieldName=o||"convexHull");return p}_getStatisticValue(e,t,i,s){const{onStatisticField:n,statisticType:a}=e;let r=null;return r=i?.has(n)?i.get(n):(0,p.qN)(this.fieldsIndex.get(n))?(0,u.H0)({values:t,returnDistinct:s}):(0,u.i5)({values:t,minValue:null,maxValue:null,useSampleStdDev:!0}),i&&i.set(n,r),r["var"===a?"variance":a]}_getPercentileValue(e,t){const{onStatisticField:i,statisticParameters:s,statisticType:n}=e,{value:a,orderBy:r}=s,o=this.fieldsIndex.get(i);return(0,u.XL)(t,{value:a,orderBy:r,fieldType:o?.type,isDiscrete:"percentile_disc"===n})}_getAttributeValues(e,t,i){if(i.has(t))return i.get(t);const s=this.fieldsIndex.get(t),n=this.items.map((i=>e.getFieldValue(i,t,s)));return i.set(t,n),n}_getAttributeDataValues(e,t){return this.items.map((i=>e.getDataValue(i,{field:t.field,field2:t.field2,field3:t.field3,fieldDelimiter:t.fieldDelimiter,normalizationField:t.normalizationField,normalizationType:t.normalizationType,normalizationTotal:t.normalizationTotal})))}async _getAttributeExpressionValues(e,t,i){const{arcadeUtils:s}=await(0,y.LC)(),n=s.createFunction(t),a=i&&s.getViewInfo(i);return e.getExpressionValues(this.items,n,a,s)}_calculateUniqueValues(e,t){const i={},s=this.items,n=s.length;for(let a=0;a<n;a++){const n=s[a],r=[];for(const t of e)r.push(t[a]);const o=r.join(",");t?null==i[o]&&(i[o]={count:1,data:r,items:[n],itemPositions:[a]}):null==i[o]?i[o]={count:1,data:r,items:[n],itemPositions:[a]}:(i[o].count++,i[o].items.push(n),i[o].itemPositions.push(a))}return i}async _getDataValues(e){const t=new c(this.query,this.featureAdapter,this.fieldsIndex),{valueExpression:i,field:s,normalizationField:n,normalizationType:a,normalizationTotal:r,scale:o}=e,l=i?{viewingMode:"map",scale:o,spatialReference:this.query.outSR||this.spatialReference}:null;return i?this._getAttributeExpressionValues(t,i,l):this._getAttributeDataValues(t,{field:s,field2:e.field2,field3:e.field3,fieldDelimiter:e.fieldDelimiter,normalizationField:n,normalizationType:a,normalizationTotal:r})}}function F(e,t,i,s){const n=s.x-i.x,a=s.y-i.y,r=n*n+a*a,o=(t.x-i.x)*n+(t.y-i.y)*a,l=Math.min(1,Math.max(0,o/r));e.x=i.x+n*l,e.y=i.y+a*l}function _(e,t){return e?t?4:3:t?3:2}!function(e){e[e.NONE=0]="NONE",e[e.EDGE=1]="EDGE",e[e.VERTEX=2]="VERTEX"}(m||(m={}));class I{constructor(e,t){this.coords=e,this.coordsIndex=t}get x(){return this.coords[this.coordsIndex]}get y(){return this.coords[this.coordsIndex+1]}get z(){return this.coords[this.coordsIndex+2]}}},85587:function(e,t,i){i.d(t,{nu:function(){return p},hr:function(){return g},Jc:function(){return h},G3:function(){return y},Of:function(){return m},z4:function(){return f},hO:function(){return d}});var s=i(70375),n=i(77234),a=i(99559);class r{constructor(e,t){this._cache=new n.Z(e),this._invalidCache=new n.Z(t)}get(e,t){const i=`${t.uid}:${e}`,s=this._cache.get(i);if(s)return s;if(void 0!==this._invalidCache.get(i))return null;try{const s=a.WhereClause.create(e,t);return this._cache.put(i,s),s}catch{return this._invalidCache.put(i,null),null}}}const o=new r(50,500),l="feature-store:unsupported-query",u=" as ",c=new Set(["esriFieldTypeOID","esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble","esriFieldTypeLong","esriFieldTypeDate"]);function d(e,t){if(!t)return!0;const i=o.get(t,e);if(!i)throw new s.Z(l,"invalid SQL expression",{where:t});if(!i.isStandardized)throw new s.Z(l,"where clause is not standard",{where:t});return m(e,i.fieldNames,"where clause contains missing fields"),!0}function f(e,t,i){if(!t)return!0;const n=o.get(t,e);if(!n)throw new s.Z(l,"invalid SQL expression",{having:t});if(!n.isAggregate)throw new s.Z(l,"having does not contain a valid aggregate function",{having:t});const a=n.fieldNames;if(m(e,a,"having contains missing fields"),!n.getExpressions().every((t=>{const{aggregateType:s,field:n}=t,a=e.has(n)&&e.get(n).name;return i.some((t=>{const{onStatisticField:i,statisticType:n}=t;return(e.has(i)&&e.get(i).name)===a&&n.toLowerCase().trim()===s}))})))throw new s.Z(l,"expressions in having should also exist in outStatistics",{having:t});return!0}function h(e,t){return e?o.get(e,t):null}function m(e,t,i,n=!0){const a=[];for(const r of t)if("*"!==r&&!e.has(r))if(n){const t=g(r);try{const i=h(t,e);if(!i)throw new s.Z(l,"invalid SQL expression",{where:t});if(!i.isStandardized)throw new s.Z(l,"expression is not standard",{clause:i});m(e,i.fieldNames,"expression contains missing fields")}catch(f){const t=f&&f.details;if(t&&(t.clause||t.where))throw f;t&&t.missingFields?a.push(...t.missingFields):a.push(r)}}else a.push(r);if(a.length)throw new s.Z(l,i,{missingFields:a})}function g(e){return e.split(u)[0]}function p(e){return e.split(u)[1]}function y(e,t){const i=t.get(e);return!!i&&!c.has(i.type)}},34398:function(e,t,i){i.d(t,{EG:function(){return _},Op:function(){return I},S2:function(){return D},Up:function(){return S},j6:function(){return V},vF:function(){return g}});var s=i(25709),n=i(61681),a=i(17321),r=i(4757),o=i(50842),l=i(53736),u=i(51033),c=i(35925),d=i(12065),f=i(15540),h=i(66069);const m=new s.X({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"}),g=Object.freeze({}),p=new f.Z,y=new f.Z,x=new f.Z,F={esriGeometryPoint:d.fQ,esriGeometryPolyline:d.J6,esriGeometryPolygon:d.eG,esriGeometryMultipoint:d.Iv};function _(e,t,i,s=e.hasZ,a=e.hasM){if((0,n.Wi)(t))return null;const r=e.hasZ&&s,o=e.hasM&&a;if(i){const n=(0,d.Nh)(x,t,e.hasZ,e.hasM,"esriGeometryPoint",i,s,a);return(0,d.fQ)(n,r,o)}return(0,d.fQ)(t,r,o)}function I(e,t,i,s,a,r,o=t,l=i){const u=t&&o,c=i&&l,f=(0,n.pC)(s)?"coords"in s?s:s.geometry:null;if((0,n.Wi)(f))return null;if(a){let s=(0,d.zj)(y,f,t,i,e,a,o,l);return r&&(s=(0,d.Nh)(x,s,u,c,e,r)),F[e]?.(s,u,c)??null}if(r){const s=(0,d.Nh)(x,f,t,i,e,r,o,l);return F[e]?.(s,u,c)??null}return(0,d.hY)(p,f,t,i,o,l),F[e]?.(p,u,c)??null}async function S(e,t,i){const{outFields:s,orderByFields:n,groupByFieldsForStatistics:a,outStatistics:r}=e;if(s)for(let o=0;o<s.length;o++)s[o]=s[o].trim();if(n)for(let o=0;o<n.length;o++)n[o]=n[o].trim();if(a)for(let o=0;o<a.length;o++)a[o]=a[o].trim();if(r)for(let o=0;o<r.length;o++)r[o].onStatisticField&&(r[o].onStatisticField=r[o].onStatisticField.trim());return e.geometry&&!e.outSR&&(e.outSR=e.geometry.spatialReference),V(e,t,i)}async function V(e,t,i){if(!e)return null;let{where:s}=e;if(e.where=s=s&&s.trim(),(!s||/^1 *= *1$/.test(s)||t&&t===s)&&(e.where=null),!e.geometry)return e;let a=await v(e);if(e.distance=0,e.units=null,"esriSpatialRelEnvelopeIntersects"===e.spatialRel){const{spatialReference:t}=e.geometry;a=(0,o.aO)(a),a.spatialReference=t}if(a){await(0,h._W)(a.spatialReference,i),a=T(a,i);const t=(await(0,u.aX)((0,l.im)(a)))[0];if((0,n.Wi)(t))throw g;const s="quantizationParameters"in e&&e.quantizationParameters?.tolerance||"maxAllowableOffset"in e&&e.maxAllowableOffset||0,r=s&&w(a,i)?{densificationStep:8*s}:void 0,o=t.toJSON(),c=await(0,h.iV)(o,o.spatialReference,i,r);if(!c)throw g;c.spatialReference=i,e.geometry=c}return e}function w(e,t){if(!e)return!1;const i=e.spatialReference;return((0,l.YX)(e)||(0,l.oU)(e)||(0,l.l9)(e))&&!(0,c.fS)(i,t)&&!(0,r.Up)(i,t)}function T(e,t){const i=e.spatialReference;return w(e,t)&&(0,l.YX)(e)?{spatialReference:i,rings:[[[e.xmin,e.ymin],[e.xmin,e.ymax],[e.xmax,e.ymax],[e.xmax,e.ymin],[e.xmin,e.ymin]]]}:e}async function v(e){const{distance:t,units:i}=e,s=e.geometry;if(null==t||"vertexAttributes"in s)return s;const n=s.spatialReference,r=i?m.fromJSON(i):(0,a.qE)(n),o=n&&((0,c.sT)(n)||(0,c.sS)(n))?s:await(0,h._W)(n,c.Zn).then((()=>(0,h.iV)(s,c.Zn)));return(await b())(o.spatialReference,o,t,r)}async function b(){return(await Promise.all([i.e(9067),i.e(8923)]).then(i.bind(i,8923))).geodesicBuffer}function D(e){return e&&z in e?JSON.parse(JSON.stringify(e,A)):e}const z="_geVersion",A=(e,t)=>e!==z?t:void 0}}]);
//# sourceMappingURL=5775.19945142.js.map