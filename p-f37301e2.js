/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.
 * v1.0.0-beta.98
 */
import{e as t}from"./p-81faec11.js";import"./p-0d071f85.js";import"./p-237be014.js";import"./p-a0074e38.js";import"./p-98d174f0.js";function n(t){return f(t)&&"fixed"!==i(t).position?function(t){let{offsetParent:e}=t,n=t,o=!1;for(;n&&n!==e;){const{assignedSlot:t}=n;if(t){let r=t.offsetParent;if("contents"===i(t).display){const e=t.hasAttribute("style"),o=t.style.display;t.style.display=i(n).display,r=t.offsetParent,t.style.display=o,e||t.removeAttribute("style")}n=t,e!==r&&(e=r,o=!0)}else if(s(n)&&n.host&&o)break;n=s(n)&&n.host||n.parentNode}return e}(t):null}function o(t){const{reference:e,floating:n,strategy:o}=t;return{reference:L(e,S(n),o),floating:{...T(n),x:0,y:0}}}function r(t){return t&&t.document&&t.location&&t.alert&&t.setInterval}function e(t){if(null==t)return window;if(!r(t)){const e=t.ownerDocument;return e&&e.defaultView||window}return t}function i(t){return e(t).getComputedStyle(t)}function u(t){return r(t)?"":t?(t.nodeName||"").toLowerCase():""}function c(){const t=navigator.userAgentData;return null!=t&&t.brands?t.brands.map((t=>t.brand+"/"+t.version)).join(" "):navigator.userAgent}function f(t){return t instanceof e(t).HTMLElement}function l(t){return t instanceof e(t).Element}function s(t){return"undefined"!=typeof ShadowRoot&&(t instanceof e(t).ShadowRoot||t instanceof ShadowRoot)}function d(t){const{overflow:e,overflowX:n,overflowY:o,display:r}=i(t);return/auto|scroll|overlay|hidden/.test(e+o+n)&&!["inline","contents"].includes(r)}function a(t){return["table","td","th"].includes(u(t))}function h(t){const e=/firefox/i.test(c()),n=i(t);return"none"!==n.transform||"none"!==n.perspective||e&&"filter"===n.willChange||e&&!!n.filter&&"none"!==n.filter||["transform","perspective"].some((t=>n.willChange.includes(t)))||["paint","layout","strict","content"].some((t=>{const e=n.contain;return null!=e&&e.includes(t)}))}function p(){return!/^((?!chrome|android).)*safari/i.test(c())}function w(t){return["html","body","#document"].includes(u(t))}const y=Math.min,v=Math.max,g=Math.round;function x(t,n,o){var i,r,s,c;void 0===n&&(n=!1),void 0===o&&(o=!1);const u=t.getBoundingClientRect();let d=1,h=1;n&&f(t)&&(d=t.offsetWidth>0&&g(u.width)/t.offsetWidth||1,h=t.offsetHeight>0&&g(u.height)/t.offsetHeight||1);const a=l(t)?e(t):window,m=!p()&&o,w=(u.left+(m&&null!=(i=null==(r=a.visualViewport)?void 0:r.offsetLeft)?i:0))/d,y=(u.top+(m&&null!=(s=null==(c=a.visualViewport)?void 0:c.offsetTop)?s:0))/h,v=u.width/d,x=u.height/h;return{width:v,height:x,top:y,right:w+v,bottom:y+x,left:w,x:w,y:y}}function m(t){return(n=t,(n instanceof e(n).Node?t.ownerDocument:t.document)||window.document).documentElement;var n}function b(t){return l(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function j(t){return x(m(t)).left+b(t).scrollLeft}function L(t,e,n){const o=f(e),i=m(e),r=x(t,o&&function(t){const e=x(t);return g(e.width)!==t.offsetWidth||g(e.height)!==t.offsetHeight}(e),"fixed"===n);let l={scrollLeft:0,scrollTop:0};const s={x:0,y:0};if(o||!o&&"fixed"!==n)if(("body"!==u(e)||d(i))&&(l=b(e)),f(e)){const t=x(e,!0);s.x=t.x+e.clientLeft,s.y=t.y+e.clientTop}else i&&(s.x=j(i));return{x:r.left+l.scrollLeft-s.x,y:r.top+l.scrollTop-s.y,width:r.width,height:r.height}}function M(t){return"html"===u(t)?t:t.assignedSlot||t.parentNode||(s(t)?t.host:null)||m(t)}function S(t){const o=e(t);let r=n(t);for(;r&&a(r)&&"static"===i(r).position;)r=n(r);return r&&("html"===u(r)||"body"===u(r)&&"static"===i(r).position&&!h(r))?o:r||function(t){let e=M(t);for(s(e)&&(e=e.host);f(e)&&!w(e);){if(h(e))return e;{const t=e.parentNode;e=s(t)?t.host:t}}return null}(t)||o}function T(t){if(f(t))return{width:t.offsetWidth,height:t.offsetHeight};const e=x(t);return{width:e.width,height:e.height}}function R(t){const e=M(t);return w(e)?t.ownerDocument.body:f(e)&&d(e)?e:R(e)}function k(t,n){var o;void 0===n&&(n=[]);const i=R(t),r=i===(null==(o=t.ownerDocument)?void 0:o.body),l=e(i),s=r?[l].concat(l.visualViewport||[],d(i)?i:[]):i,c=n.concat(s);return r?c:c.concat(k(s))}function A(n,o,r){return"viewport"===o?t(function(t,n){const o=e(t),i=m(t),r=o.visualViewport;let l=i.clientWidth,s=i.clientHeight,c=0,f=0;if(r){l=r.width,s=r.height;const t=p();(t||!t&&"fixed"===n)&&(c=r.offsetLeft,f=r.offsetTop)}return{width:l,height:s,x:c,y:f}}(n,r)):l(o)?function(t,e){const n=x(t,!1,"fixed"===e),o=n.top+t.clientTop,i=n.left+t.clientLeft;return{top:o,left:i,x:i,y:o,right:i+t.clientWidth,bottom:o+t.clientHeight,width:t.clientWidth,height:t.clientHeight}}(o,r):t(function(t){var e;const n=m(t),o=b(t),r=null==(e=t.ownerDocument)?void 0:e.body,l=v(n.scrollWidth,n.clientWidth,r?r.scrollWidth:0,r?r.clientWidth:0),s=v(n.scrollHeight,n.clientHeight,r?r.scrollHeight:0,r?r.clientHeight:0);let c=-o.scrollLeft+j(t);const f=-o.scrollTop;return"rtl"===i(r||n).direction&&(c+=v(n.clientWidth,r?r.clientWidth:0)-l),{width:l,height:s,x:c,y:f}}(m(n)))}function B(t){const e=k(t),n=function(t,e){let n=t;for(;n&&!w(n)&&!e.includes(n)&&(!l(n)||!["absolute","fixed"].includes(i(n).position));){const t=M(n);n=s(t)?t.host:t}return n}(t,e);let o=null;if(n&&f(n)){const t=S(n);d(n)?o=n:f(t)&&(o=t)}return l(o)?e.filter((t=>o&&l(t)&&function(t,e){const n=null==e.getRootNode?void 0:e.getRootNode();if(t.contains(e))return!0;if(n&&s(n)){let n=e;do{if(n&&t===n)return!0;n=n.parentNode||n.host}while(n)}return!1}(t,o)&&"body"!==u(t))):[]}function P(t){let{element:e,boundary:n,rootBoundary:o,strategy:i}=t;const r=[..."clippingAncestors"===n?B(e):[].concat(n),o],l=r.reduce(((t,n)=>{const o=A(e,n,i);return t.top=v(o.top,t.top),t.right=y(o.right,t.right),t.bottom=y(o.bottom,t.bottom),t.left=v(o.left,t.left),t}),A(e,r[0],i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}export{P as getClippingRect,o as getElementRects,S as getOffsetParent};