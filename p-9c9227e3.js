/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.
 * v1.0.0-beta.98
 */
import{n as t}from"./p-610a4162.js";import{c as n}from"./p-420e1a42.js";import{c as e,b as i}from"./p-0d071f85.js";class s{constructor(e){if(e instanceof s)return e;const[t,n]=String(e).split(".").concat("");this.value=BigInt(t+n.padEnd(s.DECIMALS,"0").slice(0,s.DECIMALS))+BigInt(s.ROUNDED&&n[s.DECIMALS]>="5"),this.isNegative="-"===e.charAt(0)}static _divRound(e,t){return s.fromBigInt(e/t+(s.ROUNDED?e*BigInt(2)/t%BigInt(2):BigInt(0)))}static fromBigInt(e){return Object.assign(Object.create(s.prototype),{value:e})}toString(){const e=this.value.toString().replace(new RegExp("-","g"),"").padStart(s.DECIMALS+1,"0"),t=e.slice(0,-s.DECIMALS),n=e.slice(-s.DECIMALS).replace(/\.?0+$/,""),i=t.concat(n.length?"."+n:"");return`${this.isNegative?"-":""}${i}`}formatToParts(e){const t=this.value.toString().replace(new RegExp("-","g"),"").padStart(s.DECIMALS+1,"0"),n=t.slice(0,-s.DECIMALS),i=t.slice(-s.DECIMALS).replace(/\.?0+$/,""),r=e.formatToParts(BigInt(n));return this.isNegative&&r.unshift({type:"minusSign",value:R.minusSign}),i.length&&(r.push({type:"decimal",value:R.decimal}),i.split("").forEach((e=>r.push({type:"fraction",value:e})))),r}format(e){const t=this.value.toString().replace(new RegExp("-","g"),"").padStart(s.DECIMALS+1,"0"),n=t.slice(0,-s.DECIMALS),i=t.slice(-s.DECIMALS).replace(/\.?0+$/,"");return`${this.isNegative?R.minusSign:""}${e.format(BigInt(n))}${i.length?`${R.decimal}${e.format(BigInt(i))}`:""}`}add(e){return s.fromBigInt(this.value+new s(e).value)}subtract(e){return s.fromBigInt(this.value-new s(e).value)}multiply(e){return s._divRound(this.value*new s(e).value,s.SHIFT)}divide(e){return s._divRound(this.value*s.SHIFT,new s(e).value)}}function r(e){return!(!e||isNaN(Number(e)))}function u(e){return e&&(n=e,t.some((e=>n.includes(e))))?l(e,(e=>{let n=!1;const i=e.split("").filter(((e,i)=>e.match(/\./g)&&!n?(n=!0,!0):!(!e.match(/\-/g)||0!==i)||t.includes(e))).reduce(((e,t)=>e+t));return r(i)?new s(i).toString():""})):"";var n}s.DECIMALS=100,s.ROUNDED=!0,s.SHIFT=BigInt("1"+"0".repeat(s.DECIMALS));const a=/^([-0])0+(?=\d)/,o=/(?!^\.)\.$/,h=/(?!^-)-/g,g=/^-\b0\b\.?0*$/,c=e=>l(e,(e=>{const t=e.replace(h,"").replace(o,"").replace(a,"$1");return r(t)?g.test(t)?t:new s(t).toString():e}));function l(e,t){if(!e)return e;const n=e.toLowerCase().indexOf("e")+1;return n?e.replace(/[eE]*$/g,"").substring(0,n).concat(e.slice(n).replace(/[eE]/g,"")).split(/[eE]/).map(((e,n)=>t(1===n?e.replace(/\./g,""):e))).join("e").replace(/^e/,"1e"):t(e)}const m=["ar","bg","bs","ca","cs","da","de","de-CH","el","en","en-AU","en-CA","en-GB","es","es-MX","et","fi","fr","fr-CH","he","hi","hr","hu","id","it","it-CH","ja","ko","lt","lv","mk","nb","nl","pl","pt","pt-PT","ro","ru","sk","sl","sr","sv","th","tr","uk","vi","zh-CN","zh-HK","zh-TW"],d=["arab","arabext","bali","beng","deva","fullwide","gujr","guru","hanidec","khmr","knda","laoo","latn","limb","mlym","mong","mymr","orya","tamldec","telu","thai","tibt"],p=e=>d.includes(e),b=(new Intl.NumberFormat).resolvedOptions().numberingSystem,f="arab"!==b&&p(b)?b:"latn",w=e=>p(e)?e:f;function $(e){return m.indexOf(e)>-1?e:e?"nb"===(e=e.toLowerCase())?"no":(e.includes("-")&&(e=e.replace(/(\w+)-(\w+)/,((e,t,n)=>`${t}-${n.toUpperCase()}`)),m.includes(e)||(e=e.split("-")[0])),m.includes(e)?e:"en"):"en"}const v=new Set;function I(e){B(e),0===v.size&&x.observe(document.documentElement,{attributes:!0,attributeFilter:["lang"],subtree:!0}),v.add(e)}function B(t){t.effectiveLocale=function(t){var n;return t.el.lang||t.locale||(null===(n=e(t.el,"[lang]"))||void 0===n?void 0:n.lang)||document.documentElement.lang||"en"}(t)}function E(e){v.delete(e),0===v.size&&x.disconnect()}const x=n("mutation",(t=>{t.forEach((t=>{const n=t.target;v.forEach((t=>{const r=!(!t.locale||t.el.lang),s=!i(n,t.el);if(r||s)return;const a=e(t.el,"[lang]");if(!a)return void(t.effectiveLocale="en");const o=a.lang;t.effectiveLocale=a.hasAttribute("lang")&&""===o?"en":o}))}))})),R=new class{constructor(){this.delocalize=e=>this._numberFormatOptions?l(e,(e=>e.trim().replace(new RegExp(`[${this._minusSign}]`,"g"),"-").replace(new RegExp(`[${this._group}]`,"g"),"").replace(new RegExp(`[${this._decimal}]`,"g"),".").replace(new RegExp(`[${this._digits.join("")}]`,"g"),this._getDigitIndex))):e,this.localize=e=>this._numberFormatOptions?l(e,(e=>r(e.trim())?new s(e.trim()).format(this._numberFormatter).replace(new RegExp(`[${this._actualGroup}]`,"g"),this._group):e)):e}get group(){return this._group}get decimal(){return this._decimal}get minusSign(){return this._minusSign}get digits(){return this._digits}get numberFormatter(){return this._numberFormatter}get numberFormatOptions(){return this._numberFormatOptions}set numberFormatOptions(e){if(e.locale=$(null==e?void 0:e.locale),e.numberingSystem=w(null==e?void 0:e.numberingSystem),!this._numberFormatOptions&&"en"===e.locale&&e.numberingSystem===f&&2===Object.keys(e).length||JSON.stringify(this._numberFormatOptions)===JSON.stringify(e))return;this._numberFormatOptions=e,this._numberFormatter=new Intl.NumberFormat(this._numberFormatOptions.locale,this._numberFormatOptions),this._digits=[...new Intl.NumberFormat(this._numberFormatOptions.locale,{useGrouping:!1,numberingSystem:this._numberFormatOptions.numberingSystem}).format(9876543210)].reverse();const t=new Map(this._digits.map(((e,t)=>[e,t]))),n=new Intl.NumberFormat(this._numberFormatOptions.locale).formatToParts(-12345678.9);this._actualGroup=n.find((e=>"group"===e.type)).value,this._group=0===this._actualGroup.trim().length?" ":this._actualGroup,this._decimal=n.find((e=>"decimal"===e.type)).value,this._minusSign=n.find((e=>"minusSign"===e.type)).value,this._getDigitIndex=e=>t.get(e)}};export{f as a,w as b,I as c,E as d,$ as g,r as i,R as n,u as p,c as s,B as u};